var $=Object.create;var x=Object.defineProperty,G=Object.defineProperties,W=Object.getOwnPropertyDescriptor,X=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertyNames,w=Object.getOwnPropertySymbols,Y=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var A=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))O.call(t,r)&&A(e,r,t[r]);if(w)for(var r of w(t))Z.call(t,r)&&A(e,r,t[r]);return e},d=(e,t)=>G(e,X(t));var T=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var tt=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Q(t))!O.call(e,o)&&o!==r&&x(e,o,{get:()=>t[o],enumerable:!(i=W(t,o))||i.enumerable});return e};var et=(e,t,r)=>(r=e!=null?$(Y(e)):{},tt(t||!e||!e.__esModule?x(r,"default",{value:e,enumerable:!0}):r,e));var k=(e,t,r)=>new Promise((i,o)=>{var a=n=>{try{s(r.next(n))}catch(u){o(u)}},l=n=>{try{s(r.throw(n))}catch(u){o(u)}},s=n=>n.done?i(n.value):Promise.resolve(n.value).then(a,l);s((r=r.apply(e,t)).next())});var U=_((At,H)=>{var it=Object.defineProperty,P=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,j=(e,t,r)=>t in e?it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B=(e,t)=>{for(var r in t||(t={}))ct.call(t,r)&&j(e,r,t[r]);if(P)for(var r of P(t))lt.call(t,r)&&j(e,r,t[r]);return e},D=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ut=(e,t,r)=>new Promise((i,o)=>{var a=n=>{try{s(r.next(n))}catch(u){o(u)}},l=n=>{try{s(r.throw(n))}catch(u){o(u)}},s=n=>n.done?i(n.value):Promise.resolve(n.value).then(a,l);s((r=r.apply(e,t)).next())}),gt=D(e=>{e.sanitizeObject=t=>Object.entries(t).reduce((r,[i,o])=>(o!=null&&o!==""&&!(Array.isArray(o)&&o.length===0)&&!(typeof o=="object"&&!Array.isArray(o)&&Object.keys(o).length===0&&o.constructor===Object)&&(r[i]=o),r),{}),e.normalizeArgs=t=>Array.isArray(t)?{message:JSON.stringify(t)}:typeof t=="object"?t:{message:String(t)}}),pt=D(e=>{var{sanitizeObject:t,normalizeArgs:r}=gt();e.useLogstyx=i=>{let{projectId:o,apiKey:a,appid:l,endpoint:s="https://api.logstyx.com/v1/logs",device:n,signatureFunc:u}=i,g=t({appid:l});function S(c){g=B(B({},g),c)}function F(c){if(Array.isArray(c))for(let b of c)delete g[b];else g={}}function f(c){return ut(this,arguments,function*(b,R={}){try{let h=t({timestamp:new Date().toISOString(),level:b,projectId:o,device:n,context:t(g),data:t(r(R))}),v={"Content-Type":"application/json"};if(typeof u=="function"){let{timestamp:V,signature:K}=u(o,a,h);v.signature=K,v.timestamp=V}return fetch(s,{method:"POST",body:JSON.stringify(h),headers:v})}catch(h){console.error(h)}})}return{info:c=>f("info",c),warning:c=>f("warning",c),error:c=>f("error",c),critical:c=>f("critical",c),send:f,setContext:S,clearContext:F}}}),{useLogstyx:mt}=pt();H.exports=e=>mt(e)});import rt from"react";var{cloneElement:ot,isValidElement:nt}=rt,at={press:"onPress",longPress:"onLongPress",focus:"onFocus",blur:"onBlur",change:"onChangeText",submit:"onSubmitEditing",scroll:"onScroll",contentSizeChange:"onContentSizeChange",layout:"onLayout",keyPress:"onKeyPress",endEditing:"onEndEditing",selectionChange:"onSelectionChange",touchStart:"onTouchStart",touchMove:"onTouchMove",touchEnd:"onTouchEnd",touchCancel:"onTouchCancel",momentumScrollBegin:"onMomentumScrollBegin",momentumScrollEnd:"onMomentumScrollEnd",scrollBeginDrag:"onScrollBeginDrag",scrollEndDrag:"onScrollEndDrag",accessibilityAction:"onAccessibilityAction",accessibilityTap:"onAccessibilityTap"},st=({children:e,event:t,context:r={},data:i={},logger:o})=>{let a=at[t];if(!nt(e)||!a)return e;let l=e.props[a],s=(...n)=>{o.info(p(p({},r),i)),typeof l=="function"&&l(...n)};return ot(e,{[a]:s})},I=st;var q=et(U(),1);import yt from"react";import{Text as z,View as ft}from"react-native";import{jsx as C,jsxs as ht}from"react/jsx-runtime";var E=class extends yt.Component{constructor(t){super(t),this.logger=t.logger,this.state={hasError:!1,error:null,errorInfo:null}}componentDidCatch(t,r){this.logger.error({type:"reactErrorBoundary",error:(t==null?void 0:t.message)||String(t),stack:t==null?void 0:t.stack,componentStack:r==null?void 0:r.componentStack}),this.setState({hasError:!0,error:t,errorInfo:r})}render(){if(this.state.hasError){let{fallbackUI:t}=this.props;return t?C(t,{error:this.state.error,errorInfo:this.state.errorInfo}):ht(ft,{style:{padding:20},children:[C(z,{style:{color:"red",fontWeight:"bold"},children:"Something went wrong."}),C(z,{children:JSON.stringify(this.state.errorInfo,null,2)})]})}return this.props.children}},L=E;import{Platform as J,Dimensions as bt,ErrorUtils as vt}from"react-native";import dt from"crypto-js";var m,y;try{m=T("react-native-simple-crypto")}catch(e){m=null}try{y=T("expo-crypto")}catch(e){y=null}function St(e){return Math.floor(e)}function M(i,o){return k(this,arguments,function*(e,t,r={}){let a=Date.now(),l=JSON.stringify(r),s=e+l+St(a),n;if(m){let u=m.utils.convertUtf8ToBytes(t),g=m.utils.convertUtf8ToBytes(s),S=yield m.HMAC.hmac256(g,u);n=m.utils.convertArrayBufferToHex(S).toUpperCase()}else y&&y.digestStringAsync?n=(yield y.digestStringAsync(y.CryptoDigestAlgorithm.SHA256,s+t,{encoding:y.CryptoEncoding.HEX})).toUpperCase():n=dt.HmacSHA256(s,t).toString().toUpperCase();return{timestamp:a,signature:n}})}import{jsx as N}from"react/jsx-runtime";var Lt=(e={})=>{let t;if(!(e!=null&&e.appid))return console.error("[Logstyx] `appid` is required when using the SDK from a mobile app (React Native)."),null;let{width:r,height:i}=bt.get("screen");t={type:"react-native",origin:null,os:J.OS,platform:J.OS,browser:null,screen:`${r}x${i}`};let o=(0,q.default)(d(p({},e),{device:t,signatureFunc:M}));return vt.setGlobalHandler((a,l)=>{o.send(l?"critical":"error",{message:a.message,stack:a.stack})}),o.Trackable=a=>N(I,d(p({},a),{logger:o})),o.ErrorBoundary=a=>N(L,d(p({},a),{logger:o})),o};export{Lt as default};
