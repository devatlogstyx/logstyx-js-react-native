var $=Object.create;var x=Object.defineProperty,K=Object.defineProperties,X=Object.getOwnPropertyDescriptor,Q=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertyNames,A=Object.getOwnPropertySymbols,Z=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var O=(e,t,o)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))T.call(t,o)&&O(e,o,t[o]);if(A)for(var o of A(t))_.call(t,o)&&O(e,o,t[o]);return e},S=(e,t)=>K(e,Q(t));var I=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,o)=>(typeof require!="undefined"?require:t)[o]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var tt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var et=(e,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Y(t))!T.call(e,n)&&n!==o&&x(e,n,{get:()=>t[n],enumerable:!(i=X(t,n))||i.enumerable});return e};var ot=(e,t,o)=>(o=e!=null?$(Z(e)):{},et(t||!e||!e.__esModule?x(o,"default",{value:e,enumerable:!0}):o,e));var k=(e,t,o)=>new Promise((i,n)=>{var r=s=>{try{a(o.next(s))}catch(l){n(l)}},c=s=>{try{a(o.throw(s))}catch(l){n(l)}},a=s=>s.done?i(s.value):Promise.resolve(s.value).then(r,c);a((o=o.apply(e,t)).next())});var D=tt((Tt,H)=>{var ct=Object.defineProperty,P=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable,j=(e,t,o)=>t in e?ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,R=(e,t)=>{for(var o in t||(t={}))lt.call(t,o)&&j(e,o,t[o]);if(P)for(var o of P(t))ut.call(t,o)&&j(e,o,t[o]);return e},B=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gt=(e,t,o)=>new Promise((i,n)=>{var r=s=>{try{a(o.next(s))}catch(l){n(l)}},c=s=>{try{a(o.throw(s))}catch(l){n(l)}},a=s=>s.done?i(s.value):Promise.resolve(s.value).then(r,c);a((o=o.apply(e,t)).next())}),pt=B(e=>{e.sanitizeObject=t=>Object.entries(t).reduce((o,[i,n])=>(n!=null&&n!==""&&!(Array.isArray(n)&&n.length===0)&&!(typeof n=="object"&&!Array.isArray(n)&&Object.keys(n).length===0&&n.constructor===Object)&&(o[i]=n),o),{}),e.normalizeArgs=t=>t instanceof Error?{title:t.name,message:t.message,stack:t.stack||null}:t==null?{message:String(t)}:Array.isArray(t)?{message:JSON.stringify(t)}:typeof t=="object"?t:{message:String(t)}}),mt=B(e=>{var{sanitizeObject:t,normalizeArgs:o}=pt();e.useLogstyx=i=>{let{projectId:n,apiKey:r,appid:c,endpoint:a="https://api.logstyx.com/v1/logs",device:s,sendFunc:l,signatureFunc:d}=i;typeof l!="function"&&(l=fetch);let g={appid:c};function J(u){g=R(R({},g),u)}function q(u){if(Array.isArray(u))for(let b of u)delete g[b];else g={}}function f(u){return gt(this,arguments,function*(b,G={}){try{let h=t({level:b,projectId:n,appid:c,device:s,context:t(g),data:t(o(G))}),v={"Content-Type":"application/json"};if(typeof d=="function"){let{timestamp:V,signature:W}=d(n,r,h);v.signature=W,v.timestamp=V}return l(a,{method:"POST",body:JSON.stringify(h),headers:v})}catch(h){console.error(h)}})}return{info:u=>f("INFO",u),warning:u=>f("WARNING",u),error:u=>f("ERROR",u),critical:u=>f("CRITICAL",u),send:f,setContext:J,clearContext:q}}}),{useLogstyx:yt}=mt();H.exports=e=>yt(e)});import nt from"react";var{cloneElement:rt,isValidElement:st}=nt,at={press:"onPress",longPress:"onLongPress",focus:"onFocus",blur:"onBlur",change:"onChangeText",submit:"onSubmitEditing",scroll:"onScroll",contentSizeChange:"onContentSizeChange",layout:"onLayout",keyPress:"onKeyPress",endEditing:"onEndEditing",selectionChange:"onSelectionChange",touchStart:"onTouchStart",touchMove:"onTouchMove",touchEnd:"onTouchEnd",touchCancel:"onTouchCancel",momentumScrollBegin:"onMomentumScrollBegin",momentumScrollEnd:"onMomentumScrollEnd",scrollBeginDrag:"onScrollBeginDrag",scrollEndDrag:"onScrollEndDrag",accessibilityAction:"onAccessibilityAction",accessibilityTap:"onAccessibilityTap"},it=({children:e,event:t,context:o={},data:i={},logger:n})=>{let r=at[t];if(!st(e)||!r)return e;let c=e.props[r],a=(...s)=>{n.info(p(p({},o),i)),typeof c=="function"&&c(...s)};return rt(e,{[r]:a})},w=it;var M=ot(D(),1);import ft from"react";import{Text as L,View as dt}from"react-native";import{jsx as C,jsxs as ht}from"react/jsx-runtime";var E=class extends ft.Component{constructor(t){super(t),this.logger=t.logger,this.state={hasError:!1,error:null,errorInfo:null}}componentDidCatch(t,o){this.logger.error({type:"reactErrorBoundary",error:(t==null?void 0:t.message)||String(t),stack:t==null?void 0:t.stack,componentStack:o==null?void 0:o.componentStack}),this.setState({hasError:!0,error:t,errorInfo:o})}render(){if(this.state.hasError){let{fallbackUI:t}=this.props;return t?C(t,{error:this.state.error,errorInfo:this.state.errorInfo}):ht(dt,{style:{padding:20},children:[C(L,{style:{color:"red",fontWeight:"bold"},children:"Something went wrong."}),C(L,{children:JSON.stringify(this.state.errorInfo,null,2)})]})}return this.props.children}},N=E;import{Platform as z,Dimensions as vt,ErrorUtils as xt}from"react-native";import St from"crypto-js";var m,y;try{m=I("react-native-simple-crypto")}catch(e){m=null}try{y=I("expo-crypto")}catch(e){y=null}function bt(e){return Math.floor(e)}function U(i,n){return k(this,arguments,function*(e,t,o={}){let r=Date.now(),c=JSON.stringify(o),a=e+c+bt(r),s;if(m){let l=m.utils.convertUtf8ToBytes(t),d=m.utils.convertUtf8ToBytes(a),g=yield m.HMAC.hmac256(d,l);s=m.utils.convertArrayBufferToHex(g).toUpperCase()}else y&&y.digestStringAsync?s=(yield y.digestStringAsync(y.CryptoDigestAlgorithm.SHA256,a+t,{encoding:y.CryptoEncoding.HEX})).toUpperCase():s=St.HmacSHA256(a,t).toString().toUpperCase();return{timestamp:r,signature:s}})}import{jsx as F}from"react/jsx-runtime";var Ut=(e={})=>{let t;if(!(e!=null&&e.appid))return console.error("[Logstyx] `appid` is required when using the SDK from a mobile app (React Native)."),null;let{width:o,height:i}=vt.get("screen");t={type:"react-native",origin:null,os:z.OS,platform:z.OS,browser:null,screen:`${o}x${i}`};let n=(0,M.default)(S(p({},e),{device:t,signatureFunc:U}));return xt.setGlobalHandler((r,c)=>{n.send(c?"CRITICAL":"ERROR",{title:(r==null?void 0:r.name)||"Unknown Error",message:r==null?void 0:r.message,stack:(r==null?void 0:r.stack)||null})}),n.Trackable=r=>F(w,S(p({},r),{logger:n})),n.ErrorBoundary=r=>F(N,S(p({},r),{logger:n})),n};export{Ut as default};
